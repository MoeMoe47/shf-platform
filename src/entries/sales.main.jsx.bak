// (dev) disabled SW import

// Dev mocks early (safe if stubbed)
if (import.meta.env.DEV) {
  await import("@/dev/mockApi.js").catch(()=>{});
}

// Scope <html> asap
try { document.documentElement.setAttribute("data-app", "sales"); } catch {}

import React from "react";
import { createRoot } from "react-dom/client";
import { HashRouter } from "react-router-dom";

/* Providers & routes */
import RootProviders from "@/entries/RootProviders.jsx";
import GlobalErrorBoundary from "@/components/GlobalErrorBoundary.jsx";
import SalesRoutes from "@/router/SalesRoutes.jsx";

/* Base CSS stack (order matters) */
import "@/styles/foundation.css";
import "@/styles/global.css";
import "@/styles/shell.css";
import "@/styles/skeleton.css";
import "@/styles/util-wash.css";
import "@/styles/dashboard-shared.css";
import "@/styles/kpi.css";

/* If you have a sales skin, import it here (optional) */
// import "@/styles/sales-shell.css";

/* Reliable mount helper */
import getMount from "@/entries/getMount.js";
const rootEl = getMount("sales");

createRoot(rootEl).render(
  <React.StrictMode>
    <GlobalErrorBoundary>
      <RootProviders appScope="sales">
        <HashRouter>
          <SalesRoutes />
        </HashRouter>
      </RootProviders>
    </GlobalErrorBoundary>
  </React.StrictMode>
);
