

/* =========================================================
   Lesson styles (extends your minimal fallback)
   Works with LessonTemplate.jsx
   ---------------------------------------------------------
   Keeps your original .lesson__pill/.lesson__tag/.prose
   and adds the layout & component classes the template uses.
========================================================= */

/* --- Pills & tags (yours, kept) --- */
.lesson__pill{
  display:inline-block; padding:4px 10px; border-radius:999px;
  background:#fff; border:1px solid var(--ring, #dcd7ce);
  font-size:12px; font-weight:500; line-height:1.3; color:var(--ink,#0f172a); white-space:nowrap;
}
.lesson__tag{
  display:inline-block; padding:3px 9px; border-radius:999px;
  background:#f9fafb; border:1px solid #e5e7eb; font-size:12px; line-height:1.3;
  color:#374151; margin:2px 4px 2px 0; white-space:nowrap;
}

/* --- Prose (yours, kept) --- */
.prose{ line-height:1.6; font-size:15px; color:var(--ink,#111827); }
.prose p{ margin:0 0 12px; }
.prose ul, .prose ol{ margin:0 0 12px 20px; padding:0; }
.prose li{ margin-bottom:6px; }
.prose h2, .prose h3{ margin:16px 0 8px; font-weight:600; line-height:1.3; }
.prose strong{ font-weight:600; }
.prose em{ font-style:italic; }

/* =========================================================
   Lesson layout (two-column with sticky TOC)
========================================================= */
.lesson-grid{
  display:grid; grid-template-columns: 1fr 280px; gap:18px;
}
.lesson-main{ min-width:0; }
@media (max-width:1024px){ .lesson-grid{ grid-template-columns:1fr; } }

/* Small toolbar for mode toggles */
.lesson-toolbar{ display:flex; gap:8px; margin-bottom:10px; flex-wrap:wrap; }

/* =========================================================
   Hero header (glass effect)
========================================================= */
.hero-card { border-radius: var(--radius,14px); overflow: hidden; }
.hero-body{
  display:flex; align-items:center; justify-content:space-between; gap:18px;
  backdrop-filter:saturate(140%) blur(8px);
  background: linear-gradient(to bottom right, rgba(255,255,255,.85), rgba(250,248,243,.7));
}
.hero-left{ min-width:0; }
.hero-row{ display:flex; gap:8px; margin-bottom:6px; }
.hero-title{ margin:6px 0 10px; font-size:clamp(22px,3.6vw,30px); }
.hero-actions{ display:flex; gap:8px; flex-wrap:wrap; }
.hero-ring{ flex:0 0 auto; filter:drop-shadow(0 8px 24px rgba(17,24,39,.08)); }

/* =========================================================
   Section head + badges
========================================================= */
.section-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
.section-title{ font-weight:700; display:flex; align-items:center; gap:8px; }
.section-title .badge{ margin-left:6px; }
.section-tools{ display:flex; gap:8px; flex-wrap:wrap; }
.badge{
  display:inline-flex; align-items:center; gap:4px;
  border:1px solid var(--ring); border-radius:999px; padding:2px 8px; font-size:12px; background:var(--card,#fff);
}

/* =========================================================
   Video + transcript + ASL PIP
========================================================= */
.video-wrap{ position:relative; border-radius:12px; overflow:hidden; background:#000; }
.video{ width:100%; display:block; aspect-ratio:16/9; background:#000; }
.video-controls{ display:flex; gap:8px; margin-top:8px; flex-wrap: wrap; }

.asl-pip{
  position:absolute; right:10px; bottom:10px;
  border-radius:10px; overflow:hidden; background:#000; padding:6px;
  box-shadow:0 8px 24px rgba(0,0,0,.35);
}
.asl-pip video{ width:100%; display:block; aspect-ratio:3/4; }
.asl-size{ position:absolute; left:6px; right:6px; bottom:-6px; transform:translateY(100%); }

.transcript{ border:1px solid var(--ring); border-radius:10px; background:var(--card,#fff); margin-top:10px; }
.transcript .sh-collapseSummary{ cursor:pointer; padding:10px 12px; font-weight:600; list-style:none; }
.transcript .sh-collapseBody{ padding:10px 12px 12px; border-top:1px solid var(--ring); }
.transcript .transcript-tools{ display:flex; gap:8px; margin-bottom:8px; }
.transcript .transcript-list{ list-style:none; padding:0; margin:0; display:grid; gap:6px; }
.transcript li{
  display:flex; align-items:flex-start; gap:10px; padding:8px;
  border:1px solid var(--ring); border-radius:10px; background:#fff;
}
.transcript .transcript-time{
  border:1px solid var(--ring); background:var(--card); border-radius:8px; padding:4px 6px; cursor:pointer;
  font-variant-numeric: tabular-nums;
}
.transcript li.is-active{ outline: 2px solid rgba(255,79,0,.25); }
.transcript .transcript-text{ flex:1; }
.transcript .transcript-actions{ display:flex; gap:6px; }

/* =========================================================
   Resources row
========================================================= */
.resources-row{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }

/* =========================================================
   Vocabulary chips
========================================================= */
.vocab-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:12px; }
.vocab-chip{
  border:1px solid var(--ring); background:var(--card,#fff); border-radius:12px; padding:12px;
  box-shadow:var(--shadow-md, 0 2px 10px rgba(0,0,0,.04));
  display:grid; gap:8px;
}
.vocab-top{ display:flex; align-items:center; justify-content:space-between; }
.vocab-video{ border-radius:10px; overflow:hidden; margin:6px 0; background:#000; }
.vocab-video video{ width:100%; display:block; aspect-ratio:1/1; }
.vocab-usage{ font-size:14px; color:var(--ink-soft,#6b7280); }
.vocab-actions{ display:flex; gap:6px; }
.star{ background:none; border:0; cursor:pointer; font-size:16px; }

/* =========================================================
   Micro-quiz
========================================================= */
.quiz .quiz-opt{
  border:1px solid var(--ring); background:#fff; border-radius:999px; padding:8px 12px;
  cursor:pointer; display:inline-flex; align-items:center; gap:6px;
}
.quiz .quiz-opt.is-right{ border-color:#10b981; background:#ecfdf5; }
.quiz .quiz-opt.is-wrong{ border-color:#ef4444; background:#fef2f2; }
.quiz .kbd{ font-size:12px; border:1px solid var(--ring); border-radius:6px; padding:0 6px; }
.quiz-feedback{ margin-top:10px; }

/* =========================================================
   Artifacts (upload grid)
========================================================= */
.dropzone{
  border:2px dashed var(--ring); border-radius:12px; padding:16px; text-align:center; margin-bottom:12px;
  background:var(--ivory,#faf8f3);
}
.thumbs{ display:grid; grid-template-columns: repeat(auto-fill, minmax(180px,1fr)); gap:12px; }
.thumb{ border:1px solid var(--ring); border-radius:10px; padding:8px; background:#fff; display:grid; gap:6px; }
.thumb img{ width:100%; height:120px; object-fit:cover; border-radius:8px; background:#f3f4f6; }
.thumb-actions{ display:flex; gap:6px; }

/* =========================================================
   Reflection editor
========================================================= */
.reflection-tools{ display:flex; gap:6px; margin-bottom:8px; flex-wrap:wrap; }
.reflection-input{
  width:100%; border:1px solid var(--ring); border-radius:10px; padding:10px; background:#fff; font:inherit;
}
.reflection-meta{ display:flex; justify-content:space-between; margin-top:6px; color:var(--ink-soft); }

/* =========================================================
   Skill mastery
========================================================= */
.skills{ display:grid; gap:10px; }
.skill{ border:1px solid var(--ring); border-radius:12px; background:#fff; padding:12px; }
.skill-row{ display:flex; align-items:center; justify-content:space-between; }
.skill-level{ font-size:12px; color:var(--ink-soft); text-transform:capitalize; }
.skill-bar{ height:8px; border:1px solid var(--ring); border-radius:999px; background:#fafafa; overflow:hidden; margin-top:6px; }
.skill-barFill{ height:100%; background:var(--orange,#ff4f00); }

/* =========================================================
   Sticky right TOC
========================================================= */
.lesson-toc{
  position:sticky; top:calc(var(--header-h) + 12px); align-self:start;
  border:1px solid var(--ring); background:var(--card,#fff); border-radius:12px; padding:12px;
  box-shadow:var(--shadow-md, 0 2px 10px rgba(0,0,0,.04));
  max-height:calc(100dvh - var(--header-h) - 24px); overflow:auto;
}
@supports not (height: 100dvh){
  .lesson-toc{ max-height:calc(100vh - var(--header-h) - 24px); }
}
.lesson-toc h4{ margin:0 0 8px; font-size:14px; color:var(--ink-soft); }
.lesson-toc ol{ list-style:none; padding:0; margin:0; display:grid; gap:4px; }
.lesson-toc a{
  display:flex; align-items:center; gap:8px; padding:8px; border-radius:10px;
  color:var(--ink); text-decoration:none; border:1px solid transparent;
}
.lesson-toc a.is-active{ background:#fff7ed; border-color:#fed7aa; }

/* =========================================================
   Overlay UIs (Keyboard map + Drill modal)
   (Aliases provided to match KeyboardOverlay.jsx)
========================================================= */
.kb-overlay,
.kbd-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:grid; place-items:center; z-index:9999;
}
.kb-card,
.kbd-dialog{
  width:min(640px, 92vw); background:var(--card,#fff); color:var(--ink);
  border-radius:14px; border:1px solid var(--ring);
  padding:16px; box-shadow:0 18px 50px rgba(0,0,0,.2);
}
.kb-grid{ list-style:none; padding:0; margin:10px 0; display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.kb-actions{ display:flex; justify-content:flex-end; gap:8px; }
.kbd{ font-size:12px; border:1px solid var(--ring); border-radius:6px; padding:0 6px; background:#fff; }

/* =========================================================
   A11y polish + helpers
========================================================= */
.section-head button:focus-visible,
.lesson-toc a:focus-visible,
.video-controls .sh-btn:focus-visible,
.dropzone:focus-visible,
.reflection-input:focus-visible{
  outline:2px solid rgba(255,79,0,.55); outline-offset:2px;
}
.sr-only{
  position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
@media (prefers-reduced-motion: reduce){
  .hero-card, .sh-card { animation:none !important; transition:none !important; }
}

/* =========================================================
   Optional modes: ASL-first & High-contrast
========================================================= */
html.asl-first .transcript li{ font-size:1.05rem; }
html.asl-first .video-wrap .asl-pip{ right:16px; bottom:16px; }

html.theme-contrast body{
  --beige:#efe7dc; --ivory:#faf8f3; --card:#ffffff;
  --ink:#fff; --ink-soft:#ddd; --line:#333;
}
html.theme-contrast .lesson-toc a.is-active{ background:#333; border-color:#666; }
/* styles/lesson.css */
html[data-focus="1"] header,
html[data-focus="1"] .app-header,
html[data-focus="1"] .crb-header { opacity:.25; pointer-events:none; transition:opacity .25s; }
html[data-focus="1"] .crb-main { max-width:940px; margin:0 auto; }


